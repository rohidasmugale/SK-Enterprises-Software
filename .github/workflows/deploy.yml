deploy:
  needs: build
  runs-on: self-hosted
  steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Deploy container
      run: |
        echo "ðŸš€ Deploying SK WebApp on self-hosted VM..."
        docker stop sk_webapp || true
        docker rm sk_webapp || true
        docker pull ${{ secrets.DOCKERHUB_USERNAME }}/sk_webapp:latest
        docker run -d --name sk_webapp \
          -p 80:80 \
          --restart unless-stopped \
          ${{ secrets.DOCKERHUB_USERNAME }}/sk_webapp:latest
        docker image prune -f
        echo "âœ… Deployment completed!"
